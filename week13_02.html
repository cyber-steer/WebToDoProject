<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        table{
            border-collapse: collapse;
        }
        th,td{
            border: 1px solid gray;
            padding: 3px;
            width: 200px;
        }
        th{
            background-color: lightgray;
        }
    </style>
    <script>
        //=========================================================================
        function gid(id){
            return document.getElementById(id);
        }
        //myTBody에 새 행을 만들어 주어진 새 단어 정보를 저장한다
        function appenddRow(newWord){
            let tbody = gid("myTBody");
            //tbody의 메소드(insertRow)를 이용하여 새 행을 생성한다.
            let newRow = tbody.insertRow(tbody.rows.length); // <tr>~</tr>
            //새 행(newRow)을 이용하여 새 칼럼(셀) 두 개를 생성한다.
            let cell0 = newRow.insertCell(0); // <td>~</td>
            let cell1 = newRow.insertCell(1);
            //생성된 cell들에 필요한 정보를 저장한다.
            cell0.innerHTML = "<b>"+newWord+"</b>";
            cell1.innerHTML = newWord.length;
            //생성된 셀에 필요한 이벤트핸들러를 연결한다
            cell0.addEventListener('click',insertBefore);
            cell1.addEventListener("click",killRow);
        }
        
        //myTBody에 새 행을 만들어 주어진 새 단어 정보를 저장한다
        function insertBefore(){
            //input에 입력된 단어를 가져온다
            let newWord = gid("inputText").value;
            gid("inputText").value = "";
            newWord = newWord.trim();
            if(newWord.length <=0)
                return;

            //새행을 추가할 위치(index)를 계산한다.
            console.log(this.parentNode.rowIndex);
            let rowIndex = this.parentNode.rowIndex -1;
            console.log(rowIndex);
            let tbody = gid("myTBody");
            //tbody의 메소드(insertRow)를 이용하여 새 행을 생성한다.
            let newRow = tbody.insertRow(rowIndex); // <tr>~</tr>
            //새 행(newRow)을 이용하여 새 칼럼(셀) 두 개를 생성한다.
            let cell0 = newRow.insertCell(0); // <td>~</td>
            let cell1 = newRow.insertCell(1);
            //생성된 cell들에 필요한 정보를 저장한다.
            cell0.innerHTML = "<b>"+newWord+"</b>";
            cell1.innerHTML = newWord.length;
            //생성된 셀에 필요한 이벤트핸들러를 연결한다
            cell0.addEventListener('click',insertBefore);
            cell1.addEventListener("click",killRow);
        }
        //=========================================================================
        function killRow(){
            let rowIndex = this.parentNode.rowIndex;
            gid("myTBody").deleteRow(rowIndex-1);
        }
        //키보드 입력 받았을때 처리할 내용
        function keydownHandler(){
            if(event.keyCode == 13){ // Enter key를 눌렀으면
                this.value = this.value.trim();
                if(this.value.length <=0)
                    return;
                appenddRow(this.value); //myTBody 새 단어 행을 생성한다.
                this.value="";

            }
        }
        //=========================================================================
        window.onload = function(){
            gid("inputText").addEventListener("keydown",keydownHandler);

        }
        //=========================================================================
        //=========================================================================
        //=========================================================================
    </script>
</head>
<body>
    <h1>Text Input Control</h1>
    <hr>
    Input: <input id="inputText" type="text" size="50">
    <hr>
    <table>
        <thead>
            <th>word</th>
            <th>Length of word</th>
        </thead>
        <tbody id = "myTBody">

        </tbody>
    </table>
</body>
</html>